# Спецификация на приложението: Генератор на изображения за съдържание

**Курс:** Визуално програмиране | **Платформа:** ComfyUI + генеративни модели (текст → изображение)

---

## 1. Описание на проблема и целевата аудитория

### Проблем
Създаването на визуално съдържание за социални мрежи, блогове и маркетинг изисква време, дизайнерски умения и често бюджет за сток снимки или дизайнери. Малките бизнеси, съдържатели на блогове и преподаватели нямат винаги достъп до бързо генериране на разнообразни изображения по описание.

### Решение
Приложение, което приема текстово описание (промпт) и генерира изображения чрез генеративен модел (напр. Stable Diffusion в ComfyUI). Потребителят контролира стила, качеството и броя варианти чрез параметри.

### Целева аудитория
- **Маркетинг специалисти** – нужда от бързи визуализации за кампании
- **Блогъри и съдържатели** – илюстрации за статии и постове
- **Преподаватели и обучаващи** – визуализации за материали и презентации
- **Малки студиа и фрийлансъри** – прототипиране на концепции преди финален дизайн

---

## 2. Основни случаи на употреба (User Stories)

| # | User Story | Priority |
|---|------------|-----------|
| **US1** | Като **маркетолог**, искам да въведа текстово описание на желаното изображение и да получа няколко варианта, за да избера най-подходящия за кампанията. | HIGH |
| **US2** | Като **блогър**, искам да задам какво да НЕ се появява в изображението (negative prompt), за да избегна нежелани елементи и да получа по-чист резултат. | HIGH |
| **US3** | Като **преподавател**, искам да контролирам размера на изхода (напр. 512×512 или 768×768) и seed за възпроизводимост, за да мога да запазя и преизползвам същия стил в материалите. | Висок |
| **US4** | Като **потребител**, искам резултатите да се записват с ясно име/папка по заявка, за да мога лесно да намеря и организирам генерираните файлове. | MID |

---

## 3. Входове и изходи на системата

### Входове
| Вход | Тип | Описание | Задължителност |
|------|-----|----------|----------------|
| **Positive prompt** | Текст | Описание на желаното съдържание (напр. „sunset over mountains, digital art“) | Задължителен |
| **Negative prompt** | Текст | Какво да се изключи (напр. „blurry, low quality“) | По избор |
| **Seed** | Цяло число | За възпроизводимост на резултата; фиксирана стойност дава същия изход при същите параметри | Задължителен (по подразбиране: случайно) |
| **Steps** | Цяло число | Брой стъпки на семплиране (качество vs скорост) | Задължителен |
| **CFG Scale** | Реално число | Колко строго да се следва промпта (напр. 7–9) | Задължителен |
| **Ширина / Височина** | Цяло число | Размер на изходното изображение в пиксели | Задължителен |
| **Batch size** | Цяло число | Брой изображения за една заявка (1–4) | По избор |

### Изходи
| Изход | Тип | Описание |
|-------|-----|----------|
| **Генерирани изображения** | Файлове (PNG) | Едно или няколко изображения, записани на диск |
| **Метаданни по заявка** | Именуване/папка | Имена или папки, свързани с дадена заявка (напр. seed, timestamp), за разграничаване на резултатите |

---

## 4. Параметри за контрол на генерацията

| Параметър | Роля | Типични стойности / ефект |
|-----------|------|---------------------------|
| **Seed** | Възпроизводимост и вариация | Фиксиран seed → същият резултат; различен seed → различен резултат |
| **Steps** | Качество и детайлност | По-високи стойности (20–30) – по-добро качество, по-бавно; по-ниски (15–20) – по-бързо |
| **CFG Scale** | Привързаност към промпта | 7–9 – баланс; твърде високо – прекалено „наситени“ резултати |
| **Ширина / Височина** | Формат и размер | 512×512, 768×768, 1024×1024 и др. (в зависимост от модела) |
| **Sampler** | Алгоритъм за семплиране | DPM++, Euler, DDIM и др. – влияе на стил и стабилност |
| **Batch size** | Брой изходи за една заявка | 1–4 изображения на едно пускане |

---

## 5. Ограничения и рискове, и как ще бъдат адресирани

| Риск / ограничение | Описание | Адресиране |
|--------------------|----------|------------|
| **Качество** | Резултатът може да е неочакван или с артефакти | Ясни препоръки в UI за steps/CFG; възможност за повторна генерация с различен seed |
| **Халюцинации** | Моделът може да добавя нежелани елементи | Negative prompt за изключване на нежелано съдържание; документация с добри практики |
| **Етика** | Генериране на неподходящо съдържание | Препоръка за използване на модел с safety filters; ясни указания в документацията за допустимо използване |
| **Поверителност** | Локално изпълнение в ComfyUI | Данните не се изпращат към външен сървър; описание в документацията, че всичко работи локално |
| **Производителност** | Голям размер/много стъпки забавя генерацията | Параметри за намаляване на разрешението и стъпките; batch ограничен (напр. до 4) |

---

## 6. Критерии за приемане (Acceptance Criteria)

Приложението се счита за работещо по предназначение, ако:

1. **AC1** Потребителят може да подаде positive prompt и да получи поне едно генерирано изображение, съответстващо на описанието.
2. **AC2** Потребителят може да зададе negative prompt и резултатът да не съдържа (или да съдържа по-малко) нежелани елементи в сравнение с липсващ negative prompt.
3. **AC3** При един и същ seed и същите останали параметри повторната генерация дава визуално същия (или много близък) резултат.
4. **AC4** Потребителят може да избере различен размер (ширина/височина) и да получи изображение с този размер.
5. **AC5** При batch size > 1 се генерират и записват съответният брой различни изображения за една заявка.
6. **AC6** Генерираните файлове се записват с име/структура, която позволява разграничаване по заявка (напр. по seed и/или timestamp).
7. **AC7** Уеб интерфейсът (Task 3) позволява подаване на параметрите, стартиране на генерация и визуализиране на резултатите.

---

## 7. Артефакти за предаване (Task 1)

- **Документ със спецификация:** този файл (`SPECIFICATION.md`).
- **Екранен прототип (wireframe):** вижте `../assets/wireframe-main-screen.png` (от корена на проекта: `assets/wireframe-main-screen.png`) и описание в `WIREFRAME.md`.
